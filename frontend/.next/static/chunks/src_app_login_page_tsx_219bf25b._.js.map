{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rexliu/staff-mgmt-tool/frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { \n  Container, \n  Paper, \n  TextField, \n  Button, \n  Typography, \n  Box, \n  Alert \n} from '@mui/material';\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\nimport { useAppDispatch, useAppSelector } from '../../lib/hooks';\nimport { loginUser } from '../../lib/features/auth/authSlice';\n\nconst validationSchema = Yup.object({\n  email: Yup.string().email('Invalid email address').required('Email is required'),\n  password: Yup.string().min(6, 'Password must be at least 6 characters').required('Password is required'),\n});\n\nexport default function LoginPage() {\n  const dispatch = useAppDispatch();\n  const router = useRouter();\n  const [error, setError] = useState('');\n  const { isAuthenticated, user, loading } = useAppSelector((state) => state.auth);\n  \n  // Debug current auth state\n  console.log('üè† LoginPage: Current auth state:', { isAuthenticated, user: user?.email, loading });\n\n  const handleSubmit = async (values: { email: string; password: string }) => {\n    try {\n      console.log('üöÄ Login attempt started');\n      setError('');\n      console.log('üìß Credentials:', { email: values.email, password: '***' });\n      \n      const result = await dispatch(loginUser(values));\n      console.log('üì¨ Redux dispatch result:', result);\n      console.log('üìä Result meta:', result.meta);\n      console.log('üîç Request status:', result.meta?.requestStatus);\n      \n      if (result.meta.requestStatus === 'fulfilled') {\n        console.log('‚úÖ Login fulfilled, payload:', result.payload);\n        console.log('‚è∞ Setting timeout for redirect...');\n        // Small delay to ensure Redux state is updated\n        setTimeout(() => {\n          console.log('üîÄ Executing redirect to dashboard');\n          router.replace('/dashboard');\n        }, 100);\n      } else if (result.meta.requestStatus === 'rejected') {\n        console.log('‚ùå Login rejected:', result);\n        setError('Invalid credentials');\n      } else {\n        console.log('‚ùì Unknown login result:', result);\n        setError('Login failed. Please try again.');\n      }\n    } catch (error) {\n      console.error('üí• Login error in catch:', error);\n      setError('Login failed. Please try again.');\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 8 }}>\n      <Paper elevation={3} sx={{ p: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" textAlign=\"center\" gutterBottom>\n          Login\n        </Typography>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Formik\n          initialValues={{ email: '', password: '' }}\n          validationSchema={validationSchema}\n          onSubmit={handleSubmit}\n        >\n          {({ errors, touched, isSubmitting }) => (\n            <Form>\n              <Box sx={{ mb: 2 }}>\n                <Field\n                  as={TextField}\n                  name=\"email\"\n                  label=\"Email\"\n                  type=\"email\"\n                  fullWidth\n                  error={touched.email && errors.email}\n                  helperText={touched.email && errors.email}\n                />\n              </Box>\n              \n              <Box sx={{ mb: 3 }}>\n                <Field\n                  as={TextField}\n                  name=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  fullWidth\n                  error={touched.password && errors.password}\n                  helperText={touched.password && errors.password}\n                />\n              </Box>\n              \n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                fullWidth\n                size=\"large\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? 'Logging in...' : 'Login'}\n              </Button>\n            </Form>\n          )}\n        </Formik>\n      </Paper>\n    </Container>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;;;AAhBA;;;;;;;;AAkBA,MAAM,mBAAmB,CAAA,GAAA,sIAAA,CAAA,SAAU,AAAD,EAAE;IAClC,OAAO,CAAA,GAAA,sIAAA,CAAA,SAAU,AAAD,IAAI,KAAK,CAAC,yBAAyB,QAAQ,CAAC;IAC5D,UAAU,CAAA,GAAA,sIAAA,CAAA,SAAU,AAAD,IAAI,GAAG,CAAC,GAAG,0CAA0C,QAAQ,CAAC;AACnF;AAEe,SAAS;;IACtB,MAAM,WAAW,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD;IAC9B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD;oCAAE,CAAC,QAAU,MAAM,IAAI;;IAE/E,2BAA2B;IAC3B,QAAQ,GAAG,CAAC,qCAAqC;QAAE;QAAiB,MAAM,MAAM;QAAO;IAAQ;IAE/F,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,SAAS;YACT,QAAQ,GAAG,CAAC,mBAAmB;gBAAE,OAAO,OAAO,KAAK;gBAAE,UAAU;YAAM;YAEtE,MAAM,SAAS,MAAM,SAAS,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EAAE;YACxC,QAAQ,GAAG,CAAC,6BAA6B;YACzC,QAAQ,GAAG,CAAC,mBAAmB,OAAO,IAAI;YAC1C,QAAQ,GAAG,CAAC,sBAAsB,OAAO,IAAI,EAAE;YAE/C,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,aAAa;gBAC7C,QAAQ,GAAG,CAAC,+BAA+B,OAAO,OAAO;gBACzD,QAAQ,GAAG,CAAC;gBACZ,+CAA+C;gBAC/C,WAAW;oBACT,QAAQ,GAAG,CAAC;oBACZ,OAAO,OAAO,CAAC;gBACjB,GAAG;YACL,OAAO,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,YAAY;gBACnD,QAAQ,GAAG,CAAC,qBAAqB;gBACjC,SAAS;YACX,OAAO;gBACL,QAAQ,GAAG,CAAC,2BAA2B;gBACvC,SAAS;YACX;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,SAAS;QACX;IACF;IAEA,qBACE,6LAAC,6MAAA,CAAA,YAAS;QAAC,UAAS;QAAK,IAAI;YAAE,IAAI;QAAE;kBACnC,cAAA,6LAAC,iMAAA,CAAA,QAAK;YAAC,WAAW;YAAG,IAAI;gBAAE,GAAG;YAAE;;8BAC9B,6LAAC,gNAAA,CAAA,aAAU;oBAAC,SAAQ;oBAAK,WAAU;oBAAK,WAAU;oBAAS,YAAY;8BAAC;;;;;;gBAIvE,uBACC,6LAAC,iMAAA,CAAA,QAAK;oBAAC,UAAS;oBAAQ,IAAI;wBAAE,IAAI;oBAAE;8BACjC;;;;;;8BAIL,6LAAC,kJAAA,CAAA,SAAM;oBACL,eAAe;wBAAE,OAAO;wBAAI,UAAU;oBAAG;oBACzC,kBAAkB;oBAClB,UAAU;8BAET,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,iBACjC,6LAAC,kJAAA,CAAA,OAAI;;8CACH,6LAAC,2LAAA,CAAA,MAAG;oCAAC,IAAI;wCAAE,IAAI;oCAAE;8CACf,cAAA,6LAAC,kJAAA,CAAA,QAAK;wCACJ,IAAI,6MAAA,CAAA,YAAS;wCACb,MAAK;wCACL,OAAM;wCACN,MAAK;wCACL,SAAS;wCACT,OAAO,QAAQ,KAAK,IAAI,OAAO,KAAK;wCACpC,YAAY,QAAQ,KAAK,IAAI,OAAO,KAAK;;;;;;;;;;;8CAI7C,6LAAC,2LAAA,CAAA,MAAG;oCAAC,IAAI;wCAAE,IAAI;oCAAE;8CACf,cAAA,6LAAC,kJAAA,CAAA,QAAK;wCACJ,IAAI,6MAAA,CAAA,YAAS;wCACb,MAAK;wCACL,OAAM;wCACN,MAAK;wCACL,SAAS;wCACT,OAAO,QAAQ,QAAQ,IAAI,OAAO,QAAQ;wCAC1C,YAAY,QAAQ,QAAQ,IAAI,OAAO,QAAQ;;;;;;;;;;;8CAInD,6LAAC,oMAAA,CAAA,SAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,SAAS;oCACT,MAAK;oCACL,UAAU;8CAET,eAAe,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQlD;GApGwB;;QACL,sHAAA,CAAA,iBAAc;QAChB,qIAAA,CAAA,YAAS;QAEmB,sHAAA,CAAA,iBAAc;;;KAJnC","debugId":null}}]
}