(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2408:(e,a,t)=>{Promise.resolve().then(t.bind(t,9690))},7335:(e,a,t)=>{"use strict";t.d(a,{G:()=>s,j:()=>l});var r=t(4540);let l=()=>(0,r.wA)(),s=r.d4},8284:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>g,Lx:()=>i,ri:()=>d});var r=t(1990);let l=t(3464).A.create({baseURL:"http://localhost:5001/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let s={async login(e){let a=await l.post("/auth/login",e);return a.data.token&&localStorage.setItem("token",a.data.token),a.data},async register(e){let a=await l.post("/auth/register",e);return a.data.token&&localStorage.setItem("token",a.data.token),a.data},getProfile:async()=>(await l.get("/auth/profile")).data,logout(){localStorage.removeItem("token")},getToken:()=>localStorage.getItem("token")},i=(0,r.zD)("auth/login",async e=>await s.login(e)),n=(0,r.zD)("auth/register",async e=>await s.register(e)),o=(0,r.Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,loading:!1,error:null},reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,s.logout()},clearError:e=>{e.error=null},setCredentials:(e,a)=>{e.user=a.payload.user,e.token=a.payload.token,e.isAuthenticated=!0,e.error=null}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.token=a.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.error.message||"Login failed"}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.token=a.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(n.rejected,(e,a)=>{e.loading=!1,e.error=a.error.message||"Registration failed"})}}),{logout:d,clearError:u,setCredentials:c}=o.actions,g=o.reducer},9690:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var r=t(5155),l=t(2115),s=t(5695),i=t(7217),n=t(8407),o=t(1116),d=t(8164),u=t(4581),c=t(2421),g=t(8534),h=t(9694),m=t(7129),p=t(7335),k=t(8284);let x=m.Ik({email:m.Yj().email("Invalid email address").required("Email is required"),password:m.Yj().min(6,"Password must be at least 6 characters").required("Password is required")});function w(){let e=(0,p.j)(),a=(0,s.useRouter)(),[t,m]=(0,l.useState)(""),w=async t=>{try{m("");let r=await e((0,k.Lx)(t));"fulfilled"===r.meta.requestStatus?a.push("/dashboard"):m("Invalid credentials")}catch(e){m("Login failed. Please try again.")}};return(0,r.jsx)(i.A,{maxWidth:"sm",sx:{mt:8},children:(0,r.jsxs)(n.A,{elevation:3,sx:{p:4},children:[(0,r.jsx)(o.A,{variant:"h4",component:"h1",textAlign:"center",gutterBottom:!0,children:"Login"}),t&&(0,r.jsx)(d.A,{severity:"error",sx:{mb:2},children:t}),(0,r.jsx)(h.l1,{initialValues:{email:"",password:""},validationSchema:x,onSubmit:w,children:e=>{let{errors:a,touched:t,isSubmitting:l}=e;return(0,r.jsxs)(h.lV,{children:[(0,r.jsx)(u.A,{sx:{mb:2},children:(0,r.jsx)(h.D0,{as:c.A,name:"email",label:"Email",type:"email",fullWidth:!0,error:t.email&&a.email,helperText:t.email&&a.email})}),(0,r.jsx)(u.A,{sx:{mb:3},children:(0,r.jsx)(h.D0,{as:c.A,name:"password",label:"Password",type:"password",fullWidth:!0,error:t.password&&a.password,helperText:t.password&&a.password})}),(0,r.jsx)(g.A,{type:"submit",variant:"contained",fullWidth:!0,size:"large",disabled:l,children:l?"Logging in...":"Login"})]})}})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[461,585,521,883,441,684,358],()=>a(2408)),_N_E=e.O()}]);