(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},5093:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8346,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,7725)),Promise.resolve().then(r.bind(r,7919))},7725:(e,t,r)=>{"use strict";r.d(t,{StoreProvider:()=>u});var o=r(5155),a=r(2115),n=r(4540),l=r(1990),i=r(8284);let s=()=>(0,l.U1)({reducer:{auth:i.Ay}});function u(e){let{children:t}=e,r=(0,a.useRef)(void 0);return r.current||(r.current=s()),(0,o.jsx)(n.Kq,{store:r.current,children:t})}},7919:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>h});var o=r(5155),a=r(9839),n=r(8254),l=r(2548),i=r(4453),s=r(5041);let u="undefined"!=typeof document;var d=r(2115);let c=(0,a.A)({palette:{mode:"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"}}}),g=function(){let e;if(u){let t=document.querySelector('meta[name="emotion-insertion-point"]');e=null!=t?t:void 0}return(0,s.A)({key:"mui-style",insertionPoint:e})}();function h(e){let{children:t}=e,[r]=(0,d.useState)(g);return(0,o.jsx)(i.C,{value:r,children:(0,o.jsxs)(n.A,{theme:c,children:[(0,o.jsx)(l.Ay,{}),t]})})}},8284:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>k,Lx:()=>s,ri:()=>c});var o=r(1990),a=r(3464);let n="http://localhost:5001/api",l=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={async login(e){console.log("AuthService: Making login request to:",n+"/auth/login"),console.log("AuthService: Credentials:",e);try{let t=await l.post("/auth/login",e);return console.log("AuthService: Login response:",t.data),t.data.token&&(localStorage.setItem("token",t.data.token),console.log("AuthService: Token saved to localStorage")),t.data}catch(e){throw console.error("AuthService: Login error:",e),e}},async register(e){let t=await l.post("/auth/register",e);return t.data.token&&localStorage.setItem("token",t.data.token),t.data},getProfile:async()=>(await l.get("/auth/profile")).data,logout(){localStorage.removeItem("token")},getToken:()=>localStorage.getItem("token")},s=(0,o.zD)("auth/login",async e=>await i.login(e)),u=(0,o.zD)("auth/register",async e=>await i.register(e)),d=(0,o.Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,loading:!1,error:null},reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,i.logout()},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Login failed"}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(u.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Registration failed"})}}),{logout:c,clearError:g,setCredentials:h}=d.actions,k=d.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[838,461,585,608,441,684,358],()=>t(5093)),_N_E=e.O()}]);