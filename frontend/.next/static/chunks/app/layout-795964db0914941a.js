(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},449:(e,t,a)=>{"use strict";a.d(t,{AuthInitializer:()=>s});var o=a(2115),r=a(7335),l=a(7574);function s(){let e=(0,r.j)();return(0,o.useEffect)(()=>{console.log("\uD83D\uDD27 AuthInitializer: Checking localStorage for token...");let t=localStorage.getItem("token");console.log("\uD83C\uDF9F️ Found token:",t?"YES":"NO"),e((0,l.Nu)({token:t})),console.log("✅ AuthInitializer: Dispatched initializeAuth"),t&&(console.log("\uD83D\uDC64 AuthInitializer: Fetching user profile..."),e((0,l.l2)()))},[e]),null}},1457:(e,t,a)=>{"use strict";a.d(t,{y:()=>s});var o=a(3464);let r="http://localhost:5001/api",l=o.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let s={async login(e){console.log("\uD83C\uDF10 AuthService: Making API call to:","".concat(r,"/auth/login")),console.log("\uD83D\uDCE7 AuthService: Sending credentials:",{email:e.email,password:"***"});try{let t=await l.post("/auth/login",e);return console.log("\uD83D\uDCE1 AuthService: API response received:",t.data),console.log("✅ AuthService: Response status:",t.status),t.data.token&&(localStorage.setItem("token",t.data.token),console.log("\uD83D\uDCBE AuthService: Token saved to localStorage"),document.cookie="token=".concat(t.data.token,"; path=/; max-age=").concat(86400),console.log("\uD83C\uDF6A AuthService: Token saved to cookies")),t.data}catch(l){var t,a,o,s,n;console.error("\uD83D\uDEA8 AuthService: API call failed:",l),console.error("\uD83D\uDCC4 Error response data:",null==(t=l.response)?void 0:t.data),console.error("\uD83D\uDD22 Error status:",null==(a=l.response)?void 0:a.status),console.error("\uD83D\uDD17 Error config:",l.config),console.error("\uD83D\uDCA5 Full error object:",l);let e=(null==(s=l.response)||null==(o=s.data)?void 0:o.message)||l.message||"Login failed",r=(null==(n=l.response)?void 0:n.status)||"Unknown";throw console.error("\uD83C\uDFAF Throwing error with message:",e,"status:",r),Error("".concat(e," (Status: ").concat(r,")"))}},async register(e){let t=await l.post("/auth/register",e);return t.data.token&&(localStorage.setItem("token",t.data.token),document.cookie="token=".concat(t.data.token,"; path=/; max-age=").concat(86400)),t.data},getProfile:async()=>(await l.get("/auth/profile")).data,logout(){localStorage.removeItem("token"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},getToken:()=>localStorage.getItem("token")}},2138:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,8346,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,449)),Promise.resolve().then(a.bind(a,7725)),Promise.resolve().then(a.bind(a,7919))},4397:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>h,Ir:()=>u,UT:()=>s,_F:()=>c,j:()=>l,lC:()=>n,vq:()=>i});var o=a(1990);let r=a(3464).A.create({baseURL:"http://localhost:5001/api"});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let l=(0,o.zD)("tasks/fetchTasks",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:t=1,limit:a=10,filters:o={}}=e,l=new URLSearchParams({page:t.toString(),limit:a.toString(),...o});return(await r.get("/tasks?".concat(l))).data}),s=(0,o.zD)("tasks/createTask",async e=>(await r.post("/tasks",e)).data),n=(0,o.zD)("tasks/updateTask",async e=>{let{id:t,updates:a}=e;return(await r.put("/tasks/".concat(t),a)).data}),i=(0,o.zD)("tasks/deleteTask",async e=>(await r.delete("/tasks/".concat(e)),e));(0,o.zD)("tasks/fetchTaskStats",async e=>(await r.get("/tasks/stats".concat(e?"?userId=".concat(e):""))).data);let d=(0,o.Z0)({name:"tasks",initialState:{tasks:[],loading:!1,error:null,total:0,page:1,limit:10,filters:{}},reducers:{setFilters:(e,t)=>{e.filters=t.payload,e.page=1},setPage:(e,t)=>{e.page=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.tasks=t.payload.data,e.total=t.payload.pagination.total,e.page=t.payload.pagination.page}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch tasks"}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.tasks.unshift(t.payload.data),e.total+=1}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to create task"}).addCase(n.fulfilled,(e,t)=>{let a=e.tasks.findIndex(e=>e.id===t.payload.data.id);-1!==a&&(e.tasks[a]=t.payload.data)}).addCase(n.rejected,(e,t)=>{e.error=t.error.message||"Failed to update task"}).addCase(i.fulfilled,(e,t)=>{e.tasks=e.tasks.filter(e=>e.id!==t.payload),e.total-=1}).addCase(i.rejected,(e,t)=>{e.error=t.error.message||"Failed to delete task"})}}),{setFilters:c,setPage:u,clearError:g}=d.actions,h=d.reducer},7335:(e,t,a)=>{"use strict";a.d(t,{G:()=>l,j:()=>r});var o=a(4540);let r=()=>(0,o.wA)(),l=o.d4},7574:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>h,Lx:()=>l,Nu:()=>g,l2:()=>n,ri:()=>d});var o=a(1990),r=a(1457);let l=(0,o.zD)("auth/login",async e=>await r.y.login(e)),s=(0,o.zD)("auth/register",async e=>await r.y.register(e)),n=(0,o.zD)("auth/fetchProfile",async()=>await r.y.getProfile()),i=(0,o.Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,loading:!1,error:null},reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,r.y.logout()},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null},initializeAuth:(e,t)=>{console.log("\uD83D\uDD27 Redux: initializeAuth called with token:",t.payload.token?"YES":"NO"),t.payload.token?(e.token=t.payload.token,e.isAuthenticated=!0,console.log("✅ Redux: Auth initialized with token")):console.log("❌ Redux: No token found, user not authenticated")}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{console.log("\uD83D\uDD04 Redux: loginUser.fulfilled action received:",t.payload),e.loading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null,console.log("✅ Redux: Auth state updated - isAuthenticated:",!0)}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Login failed"}).addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Registration failed"}).addCase(n.fulfilled,(e,t)=>{console.log("\uD83D\uDC64 Redux: fetchUserProfile.fulfilled, user data:",t.payload),e.user=t.payload.user,e.isAuthenticated=!0}).addCase(n.rejected,e=>{e.user=null,e.token=null,e.isAuthenticated=!1,r.y.logout()})}}),{logout:d,clearError:c,setCredentials:u,initializeAuth:g}=i.actions,h=i.reducer},7725:(e,t,a)=>{"use strict";a.d(t,{StoreProvider:()=>c});var o=a(5155),r=a(2115),l=a(4540),s=a(1990),n=a(7574),i=a(4397);let d=()=>(0,s.U1)({reducer:{auth:n.Ay,tasks:i.Ay}});function c(e){let{children:t}=e,a=(0,r.useRef)(void 0);return a.current||(a.current=d()),(0,o.jsx)(l.Kq,{store:a.current,children:t})}},7919:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>h});var o=a(5155),r=a(9839),l=a(8254),s=a(2548),n=a(4453),i=a(5041);let d="undefined"!=typeof document;var c=a(2115);let u=(0,r.A)({palette:{mode:"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"}}}),g=function(){let e;if(d){let t=document.querySelector('meta[name="emotion-insertion-point"]');e=null!=t?t:void 0}return(0,i.A)({key:"mui-style",insertionPoint:e})}();function h(e){let{children:t}=e,[a]=(0,c.useState)(g);return(0,o.jsx)(n.C,{value:a,children:(0,o.jsxs)(l.A,{theme:u,children:[(0,o.jsx)(s.Ay,{}),t]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[838,416,464,540,990,608,441,684,358],()=>t(2138)),_N_E=e.O()}]);