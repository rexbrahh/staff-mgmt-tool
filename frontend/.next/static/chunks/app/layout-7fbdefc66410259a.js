(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},2260:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(5155),o=r(9839),a=r(8254),l=r(2548);let s=(0,o.A)({palette:{primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},secondary:{main:"#dc004e",light:"#ff6b9d",dark:"#9a0036"},background:{default:"#f5f5f5",paper:"#ffffff"}},typography:{h1:{fontSize:"2.5rem",fontWeight:600},h2:{fontSize:"2rem",fontWeight:600},h3:{fontSize:"1.75rem",fontWeight:600},h4:{fontSize:"1.5rem",fontWeight:600},h5:{fontSize:"1.25rem",fontWeight:600},h6:{fontSize:"1rem",fontWeight:600}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}}}});function i(e){let{children:t}=e;return(0,n.jsxs)(a.A,{theme:s,children:[(0,n.jsx)(l.Ay,{}),t]})}},7725:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var n=r(5155),o=r(2115),a=r(4540),l=r(1990),s=r(8284);let i=(0,l.U1)({reducer:{auth:s.Ay},devTools:!1});function u(e){let{children:t}=e,r=(0,o.useRef)(i);return(0,n.jsx)(a.Kq,{store:r.current,children:t})}},8036:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6696,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,7725)),Promise.resolve().then(r.bind(r,2260))},8284:(e,t,r)=>{"use strict";r.d(t,{ET:()=>f,Ay:()=>k,iD:()=>u,ri:()=>g});var n=r(1990),o=r(3464);let a="http://localhost:5001/api";class l{async login(e){let t=(await o.A.post("".concat(a,"/auth/login"),e)).data;return t.token&&this.setToken(t.token),t}async register(e){let t=(await o.A.post("".concat(a,"/auth/register"),e)).data;return t.token&&this.setToken(t.token),t}async getProfile(){return(await o.A.get("".concat(a,"/auth/profile"),{headers:this.getAuthHeaders()})).data}logout(){this.token=null,localStorage.removeItem("token")}getCurrentToken(){return this.token}isAuthenticated(){return!!this.token}setToken(e){this.token=e,localStorage.setItem("token",e)}getAuthHeaders(){return{Authorization:"Bearer ".concat(this.token)}}setupInterceptors(){o.A.interceptors.request.use(e=>(this.token&&(e.headers.Authorization="Bearer ".concat(this.token)),e),e=>Promise.reject(e)),o.A.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(this.logout(),window.location.href="/login"),Promise.reject(e)})}constructor(){this.token=null,this.token=localStorage.getItem("token"),this.setupInterceptors()}}let s=new l,i={user:null,token:s.getCurrentToken(),isAuthenticated:s.isAuthenticated(),loading:!1,error:null},u=(0,n.zD)("auth/login",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.login(e)}catch(e){var n,o;return r((null==(o=e.response)||null==(n=o.data)?void 0:n.message)||"Login failed")}}),d=(0,n.zD)("auth/register",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.register(e)}catch(e){var n,o;return r((null==(o=e.response)||null==(n=o.data)?void 0:n.message)||"Registration failed")}}),h=(0,n.zD)("auth/getProfile",async(e,t)=>{let{rejectWithValue:r}=t;try{return await s.getProfile()}catch(e){var n,o;return r((null==(o=e.response)||null==(n=o.data)?void 0:n.message)||"Failed to load profile")}}),c=(0,n.Z0)({name:"auth",initialState:i,reducers:{logout:e=>{s.logout(),e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,t)=>{e.loading=!1,e.isAuthenticated=!0,e.user=t.payload.user,e.token=t.payload.token,e.error=null}).addCase(u.rejected,(e,t)=>{e.loading=!1,e.error=t.payload,e.isAuthenticated=!1,e.user=null,e.token=null}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.isAuthenticated=!0,e.user=t.payload.user,e.token=t.payload.token,e.error=null}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.payload,e.isAuthenticated=!1,e.user=null,e.token=null}).addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload,e.error=null}).addCase(h.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{logout:g,clearError:f,setCredentials:p}=c.actions,k=c.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[164,461,585,234,441,684,358],()=>t(8036)),_N_E=e.O()}]);