(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},2260:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>s});var a=r(5155),o=r(9839),n=r(8254),l=r(2548);let i=(0,o.A)({palette:{mode:"light",primary:{main:"#1976d2"},secondary:{main:"#dc004e"}}});function s(e){let{children:t}=e;return(0,a.jsxs)(n.A,{theme:i,children:[(0,a.jsx)(l.Ay,{}),t]})}},5093:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8346,23)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,7725)),Promise.resolve().then(r.bind(r,2260))},7725:(e,t,r)=>{"use strict";r.d(t,{StoreProvider:()=>d});var a=r(5155),o=r(2115),n=r(4540),l=r(1990),i=r(8284);let s=()=>(0,l.U1)({reducer:{auth:i.Ay}});function d(e){let{children:t}=e,r=(0,o.useRef)(void 0);return r.current||(r.current=s()),(0,a.jsx)(n.Kq,{store:r.current,children:t})}},8284:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>g,Lx:()=>l,ri:()=>d});var a=r(1990);let o=r(3464).A.create({baseURL:"http://localhost:5001/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let n={async login(e){let t=await o.post("/auth/login",e);return t.data.token&&localStorage.setItem("token",t.data.token),t.data},async register(e){let t=await o.post("/auth/register",e);return t.data.token&&localStorage.setItem("token",t.data.token),t.data},getProfile:async()=>(await o.get("/auth/profile")).data,logout(){localStorage.removeItem("token")},getToken:()=>localStorage.getItem("token")},l=(0,a.zD)("auth/login",async e=>await n.login(e)),i=(0,a.zD)("auth/register",async e=>await n.register(e)),s=(0,a.Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,loading:!1,error:null},reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,n.logout()},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}},extraReducers:e=>{e.addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Login failed"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.error=null}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Registration failed"})}}),{logout:d,clearError:u,setCredentials:c}=s.actions,g=s.reducer}},e=>{var t=t=>e(e.s=t);e.O(0,[838,461,585,608,441,684,358],()=>t(5093)),_N_E=e.O()}]);