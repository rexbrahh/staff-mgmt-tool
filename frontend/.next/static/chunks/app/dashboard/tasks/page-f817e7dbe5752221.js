(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{115:()=>{},410:()=>{},588:()=>{},1504:()=>{},2162:(e,t,r)=>{"use strict";var a=r(8875);r.o(a,"Grid2")&&r.d(t,{Grid2:function(){return a.Grid2}});var s=r(9625);r.o(s,"Grid2")&&r.d(t,{Grid2:function(){return s.Grid2}});var i=r(115);r.o(i,"Grid2")&&r.d(t,{Grid2:function(){return i.Grid2}});var l=r(6078);r.o(l,"Grid2")&&r.d(t,{Grid2:function(){return l.Grid2}});var n=r(5706);r.o(n,"Grid2")&&r.d(t,{Grid2:function(){return n.Grid2}});var d=r(588);r.o(d,"Grid2")&&r.d(t,{Grid2:function(){return d.Grid2}});var o=r(5651);r.o(o,"Grid2")&&r.d(t,{Grid2:function(){return o.Grid2}});var c=r(8844);r.o(c,"Grid2")&&r.d(t,{Grid2:function(){return c.Grid2}});var u=r(8937);r.o(u,"Grid2")&&r.d(t,{Grid2:function(){return u.Grid2}});var x=r(3850);r.o(x,"Grid2")&&r.d(t,{Grid2:function(){return x.Grid2}});var h=r(410);r.o(h,"Grid2")&&r.d(t,{Grid2:function(){return h.Grid2}});var j=r(6981);r.o(j,"Grid2")&&r.d(t,{Grid2:function(){return j.Grid2}});var p=r(3602);r.o(p,"Grid2")&&r.d(t,{Grid2:function(){return p.Grid2}});var A=r(3791);r.o(A,"Grid2")&&r.d(t,{Grid2:function(){return A.Grid2}});var g=r(6798);r.o(g,"Grid2")&&r.d(t,{Grid2:function(){return g.Grid2}});var f=r(1504);r.o(f,"Grid2")&&r.d(t,{Grid2:function(){return f.Grid2}});var v=r(7042);r.o(v,"Grid2")&&r.d(t,{Grid2:function(){return v.Grid2}})},3602:()=>{},3791:()=>{},3850:()=>{},4134:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var a=r(5155),s=r(2115),i=r(7217),l=r(2302),n=r(7335),d=r(4397),o=r(4581),c=r(1116),u=r(8534),x=r(8407),h=r(2162),j=r(7088),p=r(7348),A=r(2171),g=r(6673),f=r(8449),v=r(4426),m=r(4507),y=r(4424),G=r(857),k=r(1218),D=r(6632),I=r(3127),C=r(1101),b=r(6490),T=r(4918),E=r(9008),S=r(807),w=r(4341),O=r(8387),W=r(8890),R=r(9505);let N={TODO:"default",IN_PROGRESS:"info",REVIEW:"warning",DONE:"success"},z={LOW:"default",MEDIUM:"primary",HIGH:"warning",URGENT:"error"};function F(e){var t;let{task:r,onEdit:i,onDelete:l,onStatusChange:n}=e,[d,x]=(0,s.useState)(null),h=()=>{x(null)},j=e=>{null==n||n(r.id,e)},p=r.dueDate&&new Date(r.dueDate)<new Date&&"DONE"!==r.status;return(0,a.jsxs)(k.A,{sx:{mb:2,border:p?"2px solid":"1px solid",borderColor:p?"error.main":"divider"},children:[(0,a.jsxs)(D.A,{children:[(0,a.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1,children:[(0,a.jsx)(c.A,{variant:"h6",component:"h3",sx:{flexGrow:1},children:r.title}),(0,a.jsx)(I.A,{size:"small",onClick:e=>{x(e.currentTarget)},children:(0,a.jsx)(E.A,{})})]}),r.description&&(0,a.jsx)(c.A,{variant:"body2",color:"text.secondary",mb:2,children:r.description}),(0,a.jsxs)(o.A,{display:"flex",flexWrap:"wrap",gap:1,mb:2,children:[(0,a.jsx)(C.A,{label:r.status.replace("_"," "),color:N[r.status],size:"small"}),(0,a.jsx)(C.A,{label:r.priority,color:z[r.priority],size:"small",variant:"outlined"})]}),(0,a.jsxs)(o.A,{display:"flex",flexDirection:"column",gap:1,children:[r.assignedTo&&(0,a.jsxs)(o.A,{display:"flex",alignItems:"center",gap:1,children:[(0,a.jsx)(S.A,{fontSize:"small",color:"action"}),(0,a.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:[r.assignedTo.firstName," ",r.assignedTo.lastName]})]}),r.dueDate&&(0,a.jsxs)(o.A,{display:"flex",alignItems:"center",gap:1,children:[(0,a.jsx)(w.A,{fontSize:"small",color:p?"error":"action"}),(0,a.jsxs)(c.A,{variant:"body2",color:p?"error":"text.secondary",fontWeight:p?"bold":"normal",children:["Due: ",(t=r.dueDate)?new Date(t).toLocaleDateString():null,p&&" (Overdue)"]})]}),r.project&&(0,a.jsxs)(o.A,{display:"flex",alignItems:"center",gap:1,children:[(0,a.jsx)(O.A,{fontSize:"small",color:"action"}),(0,a.jsx)(c.A,{variant:"body2",color:"text.secondary",children:r.project.name})]})]})]}),(0,a.jsx)(b.A,{children:(0,a.jsxs)(o.A,{display:"flex",gap:1,flexWrap:"wrap",children:["DONE"!==r.status&&(0,a.jsxs)(a.Fragment,{children:["TODO"===r.status&&(0,a.jsx)(u.A,{size:"small",variant:"outlined",onClick:()=>j("IN_PROGRESS"),children:"Start"}),"IN_PROGRESS"===r.status&&(0,a.jsx)(u.A,{size:"small",variant:"outlined",onClick:()=>j("REVIEW"),children:"Submit for Review"}),"REVIEW"===r.status&&(0,a.jsx)(u.A,{size:"small",variant:"outlined",color:"success",onClick:()=>j("DONE"),children:"Mark Done"})]}),"DONE"===r.status&&(0,a.jsx)(C.A,{label:"Completed",color:"success",size:"small"})]})}),(0,a.jsxs)(T.A,{anchorEl:d,open:!!d,onClose:h,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,a.jsxs)(g.A,{onClick:()=>{null==i||i(r),h()},children:[(0,a.jsx)(W.A,{fontSize:"small",sx:{mr:1}}),"Edit"]}),(0,a.jsxs)(g.A,{onClick:()=>{null==l||l(r.id),h()},sx:{color:"error.main"},children:[(0,a.jsx)(R.A,{fontSize:"small",sx:{mr:1}}),"Delete"]})]})]})}function P(e){let{onCreateTask:t,onEditTask:r,onDeleteTask:i}=e,k=(0,n.j)(),{tasks:D,loading:I,error:C,total:b,page:T,limit:E,filters:S}=(0,n.G)(e=>e.tasks),[w,O]=(0,s.useState)(S),[W,R]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k((0,d.j)({page:T,limit:E,filters:S}))},[k,T,E,S]);let N=async(e,t)=>{try{await k((0,d.lC)({id:e,updates:{status:t}})).unwrap()}catch(e){console.error("Failed to update task status:",e)}},z=Math.ceil(b/E);return(0,a.jsxs)(o.A,{children:[(0,a.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,a.jsx)(c.A,{variant:"h4",component:"h1",children:"Tasks"}),(0,a.jsxs)(o.A,{display:"flex",gap:2,children:[(0,a.jsx)(u.A,{variant:"outlined",startIcon:(0,a.jsx)(y.A,{}),onClick:()=>R(!W),children:"Filters"}),t&&(0,a.jsx)(u.A,{variant:"contained",startIcon:(0,a.jsx)(G.A,{}),onClick:t,children:"New Task"})]})]}),W&&(0,a.jsxs)(x.A,{sx:{p:3,mb:3},children:[(0,a.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Filter Tasks"}),(0,a.jsxs)(h.Grid2,{container:!0,spacing:2,children:[(0,a.jsx)(h.Grid2,{xs:12,sm:6,md:3,children:(0,a.jsxs)(j.A,{fullWidth:!0,children:[(0,a.jsx)(p.A,{children:"Status"}),(0,a.jsxs)(A.A,{value:w.status||"",label:"Status",onChange:e=>O({...w,status:e.target.value||void 0}),children:[(0,a.jsx)(g.A,{value:"",children:"All"}),(0,a.jsx)(g.A,{value:"TODO",children:"To Do"}),(0,a.jsx)(g.A,{value:"IN_PROGRESS",children:"In Progress"}),(0,a.jsx)(g.A,{value:"REVIEW",children:"Review"}),(0,a.jsx)(g.A,{value:"DONE",children:"Done"})]})]})}),(0,a.jsx)(h.Grid2,{xs:12,sm:6,md:3,children:(0,a.jsxs)(j.A,{fullWidth:!0,children:[(0,a.jsx)(p.A,{children:"Priority"}),(0,a.jsxs)(A.A,{value:w.priority||"",label:"Priority",onChange:e=>O({...w,priority:e.target.value||void 0}),children:[(0,a.jsx)(g.A,{value:"",children:"All"}),(0,a.jsx)(g.A,{value:"LOW",children:"Low"}),(0,a.jsx)(g.A,{value:"MEDIUM",children:"Medium"}),(0,a.jsx)(g.A,{value:"HIGH",children:"High"}),(0,a.jsx)(g.A,{value:"URGENT",children:"Urgent"})]})]})}),(0,a.jsx)(h.Grid2,{xs:12,sm:6,md:3,children:(0,a.jsx)(f.A,{fullWidth:!0,label:"Assigned To ID",value:w.assignedToId||"",onChange:e=>O({...w,assignedToId:e.target.value||void 0}),placeholder:"Enter user ID"})}),(0,a.jsx)(h.Grid2,{xs:12,sm:6,md:3,children:(0,a.jsx)(f.A,{fullWidth:!0,label:"Project ID",value:w.projectId||"",onChange:e=>O({...w,projectId:e.target.value||void 0}),placeholder:"Enter project ID"})})]}),(0,a.jsxs)(o.A,{display:"flex",gap:2,mt:2,children:[(0,a.jsx)(u.A,{variant:"contained",onClick:()=>{k((0,d._F)(w)),R(!1)},children:"Apply Filters"}),(0,a.jsx)(u.A,{variant:"outlined",onClick:()=>{let e={};O(e),k((0,d._F)(e))},children:"Clear Filters"})]})]}),C&&(0,a.jsx)(l.A,{severity:"error",sx:{mb:3},children:C}),I&&(0,a.jsx)(o.A,{display:"flex",justifyContent:"center",my:4,children:(0,a.jsx)(v.A,{})}),!I&&(0,a.jsx)(a.Fragment,{children:0===D.length?(0,a.jsxs)(x.A,{sx:{p:4,textAlign:"center"},children:[(0,a.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"No tasks found"}),(0,a.jsx)(c.A,{variant:"body2",color:"text.secondary",mt:1,children:Object.keys(S).length>0?"Try adjusting your filters or create a new task.":"Get started by creating your first task."}),t&&(0,a.jsx)(u.A,{variant:"contained",startIcon:(0,a.jsx)(G.A,{}),onClick:t,sx:{mt:2},children:"Create Task"})]}):(0,a.jsxs)(a.Fragment,{children:[D.map(e=>(0,a.jsx)(F,{task:e,onEdit:r,onDelete:i,onStatusChange:N},e.id)),z>1&&(0,a.jsx)(o.A,{display:"flex",justifyContent:"center",mt:4,children:(0,a.jsx)(m.A,{count:z,page:T,onChange:(e,t)=>{k((0,d.Ir)(t))},color:"primary"})})]})})]})}var U=r(6114),_=r(4492),M=r(9927),H=r(1977),L=r(8506),q=r(1090),V=r(5564);let B={title:"",description:"",status:"TODO",priority:"MEDIUM",dueDate:null,projectId:"",assignedToId:""};function J(e){let{open:t,onClose:r,task:i}=e,c=(0,n.j)(),{loading:x,error:h}=(0,n.G)(e=>e.tasks),[v,m]=(0,s.useState)(B),[y,G]=(0,s.useState)({}),k=!!i;(0,s.useEffect)(()=>{i?m({title:i.title,description:i.description||"",status:i.status,priority:i.priority,dueDate:i.dueDate?new Date(i.dueDate):null,projectId:i.projectId||"",assignedToId:i.assignedToId||""}):m(B),G({})},[i,t]);let D=()=>{let e={};return v.title.trim()||(e.title="Title is required"),G(e),0===Object.keys(e).length},I=async e=>{var t;if(e.preventDefault(),!D())return;let a={title:v.title.trim(),description:v.description.trim()||void 0,status:v.status,priority:v.priority,dueDate:(null==(t=v.dueDate)?void 0:t.toISOString())||void 0,projectId:v.projectId||void 0,assignedToId:v.assignedToId||void 0};try{k&&i?await c((0,d.lC)({id:i.id,updates:a})).unwrap():await c((0,d.UT)(a)).unwrap(),r()}catch(e){console.error("Form submission failed:",e)}},C=e=>t=>{let r=t&&"object"==typeof t&&"target"in t?t.target.value:t;m(t=>({...t,[e]:r})),y[e]&&G(t=>({...t,[e]:void 0}))};return(0,a.jsx)(q.$J,{dateAdapter:V.h,children:(0,a.jsx)(U.A,{open:t,onClose:r,maxWidth:"sm",fullWidth:!0,children:(0,a.jsxs)("form",{onSubmit:I,children:[(0,a.jsx)(_.A,{children:k?"Edit Task":"Create New Task"}),(0,a.jsxs)(M.A,{children:[h&&(0,a.jsx)(l.A,{severity:"error",sx:{mb:2},children:h}),(0,a.jsxs)(o.A,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[(0,a.jsx)(f.A,{fullWidth:!0,label:"Title",value:v.title,onChange:C("title"),error:!!y.title,helperText:y.title,required:!0}),(0,a.jsx)(f.A,{fullWidth:!0,label:"Description",value:v.description,onChange:C("description"),multiline:!0,rows:3}),(0,a.jsxs)(o.A,{display:"flex",gap:2,children:[(0,a.jsxs)(j.A,{fullWidth:!0,children:[(0,a.jsx)(p.A,{children:"Status"}),(0,a.jsxs)(A.A,{value:v.status,label:"Status",onChange:C("status"),children:[(0,a.jsx)(g.A,{value:"TODO",children:"To Do"}),(0,a.jsx)(g.A,{value:"IN_PROGRESS",children:"In Progress"}),(0,a.jsx)(g.A,{value:"REVIEW",children:"Review"}),(0,a.jsx)(g.A,{value:"DONE",children:"Done"})]})]}),(0,a.jsxs)(j.A,{fullWidth:!0,children:[(0,a.jsx)(p.A,{children:"Priority"}),(0,a.jsxs)(A.A,{value:v.priority,label:"Priority",onChange:C("priority"),children:[(0,a.jsx)(g.A,{value:"LOW",children:"Low"}),(0,a.jsx)(g.A,{value:"MEDIUM",children:"Medium"}),(0,a.jsx)(g.A,{value:"HIGH",children:"High"}),(0,a.jsx)(g.A,{value:"URGENT",children:"Urgent"})]})]})]}),(0,a.jsx)(L.l,{label:"Due Date",value:v.dueDate,onChange:C("dueDate"),slotProps:{textField:{fullWidth:!0}}}),(0,a.jsx)(f.A,{fullWidth:!0,label:"Project ID",value:v.projectId,onChange:C("projectId"),placeholder:"Optional: Enter project ID"}),(0,a.jsx)(f.A,{fullWidth:!0,label:"Assigned To (User ID)",value:v.assignedToId,onChange:C("assignedToId"),placeholder:"Optional: Enter user ID"})]})]}),(0,a.jsxs)(H.A,{children:[(0,a.jsx)(u.A,{onClick:r,disabled:x,children:"Cancel"}),(0,a.jsx)(u.A,{type:"submit",variant:"contained",disabled:x,children:x?"Saving...":k?"Update":"Create"})]})]})})})}function Z(){let e=(0,n.j)(),[t,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),h=async t=>{if(window.confirm("Are you sure you want to delete this task?"))try{await e((0,d.vq)(t)).unwrap(),x(null)}catch(e){x("Failed to delete task")}};return(0,a.jsxs)(i.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[u&&(0,a.jsx)(l.A,{severity:"error",sx:{mb:3},onClose:()=>x(null),children:u}),(0,a.jsx)(P,{onCreateTask:()=>{c(null),r(!0)},onEditTask:e=>{c(e),r(!0)},onDeleteTask:h}),(0,a.jsx)(J,{open:t,onClose:()=>{r(!1),c(null)},task:o})]})}},4397:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>h,Ir:()=>u,UT:()=>l,_F:()=>c,j:()=>i,lC:()=>n,vq:()=>d});var a=r(1990);let s=r(3464).A.create({baseURL:"http://localhost:5001/api"});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i=(0,a.zD)("tasks/fetchTasks",async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:t=1,limit:r=10,filters:a={}}=e,i=new URLSearchParams({page:t.toString(),limit:r.toString(),...a});return(await s.get("/tasks?".concat(i))).data}),l=(0,a.zD)("tasks/createTask",async e=>(await s.post("/tasks",e)).data),n=(0,a.zD)("tasks/updateTask",async e=>{let{id:t,updates:r}=e;return(await s.put("/tasks/".concat(t),r)).data}),d=(0,a.zD)("tasks/deleteTask",async e=>(await s.delete("/tasks/".concat(e)),e));(0,a.zD)("tasks/fetchTaskStats",async e=>(await s.get("/tasks/stats".concat(e?"?userId=".concat(e):""))).data);let o=(0,a.Z0)({name:"tasks",initialState:{tasks:[],loading:!1,error:null,total:0,page:1,limit:10,filters:{}},reducers:{setFilters:(e,t)=>{e.filters=t.payload,e.page=1},setPage:(e,t)=>{e.page=t.payload},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.tasks=t.payload.data,e.total=t.payload.pagination.total,e.page=t.payload.pagination.page}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch tasks"}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.tasks.unshift(t.payload.data),e.total+=1}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to create task"}).addCase(n.fulfilled,(e,t)=>{let r=e.tasks.findIndex(e=>e.id===t.payload.data.id);-1!==r&&(e.tasks[r]=t.payload.data)}).addCase(n.rejected,(e,t)=>{e.error=t.error.message||"Failed to update task"}).addCase(d.fulfilled,(e,t)=>{e.tasks=e.tasks.filter(e=>e.id!==t.payload),e.total-=1}).addCase(d.rejected,(e,t)=>{e.error=t.error.message||"Failed to delete task"})}}),{setFilters:c,setPage:u,clearError:x}=o.actions,h=o.reducer},5651:()=>{},5706:()=>{},6078:()=>{},6798:()=>{},6981:()=>{},7042:()=>{},7335:(e,t,r)=>{"use strict";r.d(t,{G:()=>i,j:()=>s});var a=r(4540);let s=()=>(0,a.wA)(),i=a.d4},8670:(e,t,r)=>{Promise.resolve().then(r.bind(r,4134))},8844:()=>{},8875:()=>{},8937:()=>{},9625:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[416,903,464,540,990,921,449,544,441,684,358],()=>t(8670)),_N_E=e.O()}]);