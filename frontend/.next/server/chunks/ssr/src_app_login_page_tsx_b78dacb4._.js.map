{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rexliu/staff-mgmt-tool/frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { \n  Container, \n  Paper, \n  TextField, \n  Button, \n  Typography, \n  Box, \n  Alert \n} from '@mui/material';\nimport { Formik, Form, Field } from 'formik';\nimport * as Yup from 'yup';\nimport { useAppDispatch, useAppSelector } from '../../lib/hooks';\nimport { loginUser } from '../../lib/features/auth/authSlice';\n\nconst validationSchema = Yup.object({\n  email: Yup.string().email('Invalid email address').required('Email is required'),\n  password: Yup.string().min(6, 'Password must be at least 6 characters').required('Password is required'),\n});\n\nexport default function LoginPage() {\n  console.log('üé¨ LoginPage: Component function called');\n  \n  const dispatch = useAppDispatch();\n  const router = useRouter();\n  const [error, setError] = useState('');\n  const { isAuthenticated, user, loading } = useAppSelector((state) => state.auth);\n  \n  // Debug current auth state\n  console.log('üè† LoginPage: Component rendered/re-rendered');\n  console.log('üè† LoginPage: Current auth state:', { isAuthenticated, user: user?.email, loading });\n  console.log('üè† LoginPage: Dependencies loaded successfully');\n  console.log('üè† LoginPage: dispatch type:', typeof dispatch);\n  console.log('üè† LoginPage: router type:', typeof router);\n  \n  // Add click handler debugging\n  const handleButtonClick = (e: React.MouseEvent) => {\n    console.log('üñ±Ô∏è BUTTON CLICKED!', e);\n    console.log('üñ±Ô∏è Button event type:', e.type);\n    console.log('üñ±Ô∏è Button target:', e.target);\n  };\n\n  const handleSubmit = async (values: { email: string; password: string }) => {\n    console.log('üéØ handleSubmit CALLED!!! Values:', values);\n    console.log('üéØ handleSubmit function type:', typeof handleSubmit);\n    \n    try {\n      console.log('üöÄ Login attempt started');\n      setError('');\n      console.log('üìß Credentials:', { email: values.email, password: '***' });\n      \n      const result = await dispatch(loginUser(values));\n      console.log('üì¨ Redux dispatch result:', result);\n      console.log('üìä Result meta:', result.meta);\n      console.log('üîç Request status:', result.meta?.requestStatus);\n      \n      if (result.meta.requestStatus === 'fulfilled') {\n        console.log('‚úÖ Login fulfilled, payload:', result.payload);\n        console.log('üîÄ Redirecting to dashboard...');\n        \n        // Small delay to ensure cookie is set\n        setTimeout(() => {\n          router.push('/dashboard');\n        }, 100);\n      } else if (result.meta.requestStatus === 'rejected') {\n        console.log('‚ùå Login rejected:', result);\n        console.log('‚ùå Rejection payload:', result.payload);\n        console.log('‚ùå Rejection error:', result.error);\n        \n        // Extract more detailed error message\n        const errorMsg = result.error?.message || 'Invalid credentials. Please check your email and password.';\n        setError(errorMsg);\n      } else {\n        console.log('‚ùì Unknown login result:', result);\n        setError('Login failed. Please try again.');\n      }\n    } catch (error) {\n      console.error('üí• Login error in catch:', error);\n      setError('Login failed. Please try again.');\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 8 }}>\n      <Paper elevation={3} sx={{ p: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" textAlign=\"center\" gutterBottom>\n          Login\n        </Typography>\n        \n        {/* Development hint */}\n        <Box sx={{ mb: 2, p: 2, bgcolor: 'info.light', borderRadius: 1 }}>\n          <Typography variant=\"body2\" color=\"info.contrastText\">\n            <strong>Test Credentials:</strong><br />\n            Email: test@example.com<br />\n            Password: password123\n          </Typography>\n        </Box>\n        \n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Formik\n          initialValues={{ email: 'test@example.com', password: 'password123' }}\n          validationSchema={validationSchema}\n          onSubmit={(values, formikBag) => {\n            console.log('üìù Formik onSubmit triggered!', values);\n            console.log('üìù Formik bag:', formikBag);\n            return handleSubmit(values);\n          }}\n        >\n          {({ errors, touched, isSubmitting, handleSubmit: formikHandleSubmit }) => {\n            console.log('üìã Formik render function called');\n            console.log('üìã isSubmitting:', isSubmitting);\n            console.log('üìã errors:', errors);\n            console.log('üìã formikHandleSubmit type:', typeof formikHandleSubmit);\n            \n            return (\n            <Form onSubmit={(e) => {\n              console.log('üî• FORM onSubmit triggered!', e);\n              console.log('üî• Event target:', e.target);\n              console.log('üî• Event type:', e.type);\n              formikHandleSubmit(e);\n            }}>\n              <Box sx={{ mb: 2 }}>\n                <Field\n                  as={TextField}\n                  name=\"email\"\n                  label=\"Email\"\n                  type=\"email\"\n                  fullWidth\n                  error={touched.email && errors.email}\n                  helperText={touched.email && errors.email}\n                />\n              </Box>\n              \n              <Box sx={{ mb: 3 }}>\n                <Field\n                  as={TextField}\n                  name=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  fullWidth\n                  error={touched.password && errors.password}\n                  helperText={touched.password && errors.password}\n                />\n              </Box>\n              \n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                fullWidth\n                size=\"large\"\n                disabled={isSubmitting}\n                onClick={(e) => {\n                  console.log('üî¥ BUTTON CLICKED!!!', e);\n                  console.log('üî¥ Button disabled?', isSubmitting);\n                  console.log('üî¥ Button type:', e.currentTarget.type);\n                  handleButtonClick(e);\n                }}\n              >\n                {isSubmitting ? 'Logging in...' : 'Login'}\n              </Button>\n            </Form>\n            );\n          }}\n        </Formik>\n      </Paper>\n    </Container>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAhBA;;;;;;;;;AAkBA,MAAM,mBAAmB,CAAA,GAAA,mIAAA,CAAA,SAAU,AAAD,EAAE;IAClC,OAAO,CAAA,GAAA,mIAAA,CAAA,SAAU,AAAD,IAAI,KAAK,CAAC,yBAAyB,QAAQ,CAAC;IAC5D,UAAU,CAAA,GAAA,mIAAA,CAAA,SAAU,AAAD,IAAI,GAAG,CAAC,GAAG,0CAA0C,QAAQ,CAAC;AACnF;AAEe,SAAS;IACtB,QAAQ,GAAG,CAAC;IAEZ,MAAM,WAAW,CAAA,GAAA,mHAAA,CAAA,iBAAc,AAAD;IAC9B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,mHAAA,CAAA,iBAAc,AAAD,EAAE,CAAC,QAAU,MAAM,IAAI;IAE/E,2BAA2B;IAC3B,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,qCAAqC;QAAE;QAAiB,MAAM,MAAM;QAAO;IAAQ;IAC/F,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,gCAAgC,OAAO;IACnD,QAAQ,GAAG,CAAC,8BAA8B,OAAO;IAEjD,8BAA8B;IAC9B,MAAM,oBAAoB,CAAC;QACzB,QAAQ,GAAG,CAAC,uBAAuB;QACnC,QAAQ,GAAG,CAAC,0BAA0B,EAAE,IAAI;QAC5C,QAAQ,GAAG,CAAC,sBAAsB,EAAE,MAAM;IAC5C;IAEA,MAAM,eAAe,OAAO;QAC1B,QAAQ,GAAG,CAAC,qCAAqC;QACjD,QAAQ,GAAG,CAAC,kCAAkC,OAAO;QAErD,IAAI;YACF,QAAQ,GAAG,CAAC;YACZ,SAAS;YACT,QAAQ,GAAG,CAAC,mBAAmB;gBAAE,OAAO,OAAO,KAAK;gBAAE,UAAU;YAAM;YAEtE,MAAM,SAAS,MAAM,SAAS,CAAA,GAAA,2IAAA,CAAA,YAAS,AAAD,EAAE;YACxC,QAAQ,GAAG,CAAC,6BAA6B;YACzC,QAAQ,GAAG,CAAC,mBAAmB,OAAO,IAAI;YAC1C,QAAQ,GAAG,CAAC,sBAAsB,OAAO,IAAI,EAAE;YAE/C,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,aAAa;gBAC7C,QAAQ,GAAG,CAAC,+BAA+B,OAAO,OAAO;gBACzD,QAAQ,GAAG,CAAC;gBAEZ,sCAAsC;gBACtC,WAAW;oBACT,OAAO,IAAI,CAAC;gBACd,GAAG;YACL,OAAO,IAAI,OAAO,IAAI,CAAC,aAAa,KAAK,YAAY;gBACnD,QAAQ,GAAG,CAAC,qBAAqB;gBACjC,QAAQ,GAAG,CAAC,wBAAwB,OAAO,OAAO;gBAClD,QAAQ,GAAG,CAAC,sBAAsB,OAAO,KAAK;gBAE9C,sCAAsC;gBACtC,MAAM,WAAW,OAAO,KAAK,EAAE,WAAW;gBAC1C,SAAS;YACX,OAAO;gBACL,QAAQ,GAAG,CAAC,2BAA2B;gBACvC,SAAS;YACX;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,SAAS;QACX;IACF;IAEA,qBACE,8OAAC,0MAAA,CAAA,YAAS;QAAC,UAAS;QAAK,IAAI;YAAE,IAAI;QAAE;kBACnC,cAAA,8OAAC,8LAAA,CAAA,QAAK;YAAC,WAAW;YAAG,IAAI;gBAAE,GAAG;YAAE;;8BAC9B,8OAAC,6MAAA,CAAA,aAAU;oBAAC,SAAQ;oBAAK,WAAU;oBAAK,WAAU;oBAAS,YAAY;8BAAC;;;;;;8BAKxE,8OAAC,wLAAA,CAAA,MAAG;oBAAC,IAAI;wBAAE,IAAI;wBAAG,GAAG;wBAAG,SAAS;wBAAc,cAAc;oBAAE;8BAC7D,cAAA,8OAAC,6MAAA,CAAA,aAAU;wBAAC,SAAQ;wBAAQ,OAAM;;0CAChC,8OAAC;0CAAO;;;;;;0CAA0B,8OAAC;;;;;4BAAK;0CACjB,8OAAC;;;;;4BAAK;;;;;;;;;;;;gBAMhC,uBACC,8OAAC,8LAAA,CAAA,QAAK;oBAAC,UAAS;oBAAQ,IAAI;wBAAE,IAAI;oBAAE;8BACjC;;;;;;8BAIL,8OAAC,+IAAA,CAAA,SAAM;oBACL,eAAe;wBAAE,OAAO;wBAAoB,UAAU;oBAAc;oBACpE,kBAAkB;oBAClB,UAAU,CAAC,QAAQ;wBACjB,QAAQ,GAAG,CAAC,iCAAiC;wBAC7C,QAAQ,GAAG,CAAC,kBAAkB;wBAC9B,OAAO,aAAa;oBACtB;8BAEC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,cAAc,kBAAkB,EAAE;wBACnE,QAAQ,GAAG,CAAC;wBACZ,QAAQ,GAAG,CAAC,oBAAoB;wBAChC,QAAQ,GAAG,CAAC,cAAc;wBAC1B,QAAQ,GAAG,CAAC,+BAA+B,OAAO;wBAElD,qBACA,8OAAC,+IAAA,CAAA,OAAI;4BAAC,UAAU,CAAC;gCACf,QAAQ,GAAG,CAAC,+BAA+B;gCAC3C,QAAQ,GAAG,CAAC,oBAAoB,EAAE,MAAM;gCACxC,QAAQ,GAAG,CAAC,kBAAkB,EAAE,IAAI;gCACpC,mBAAmB;4BACrB;;8CACE,8OAAC,wLAAA,CAAA,MAAG;oCAAC,IAAI;wCAAE,IAAI;oCAAE;8CACf,cAAA,8OAAC,+IAAA,CAAA,QAAK;wCACJ,IAAI,0MAAA,CAAA,YAAS;wCACb,MAAK;wCACL,OAAM;wCACN,MAAK;wCACL,SAAS;wCACT,OAAO,QAAQ,KAAK,IAAI,OAAO,KAAK;wCACpC,YAAY,QAAQ,KAAK,IAAI,OAAO,KAAK;;;;;;;;;;;8CAI7C,8OAAC,wLAAA,CAAA,MAAG;oCAAC,IAAI;wCAAE,IAAI;oCAAE;8CACf,cAAA,8OAAC,+IAAA,CAAA,QAAK;wCACJ,IAAI,0MAAA,CAAA,YAAS;wCACb,MAAK;wCACL,OAAM;wCACN,MAAK;wCACL,SAAS;wCACT,OAAO,QAAQ,QAAQ,IAAI,OAAO,QAAQ;wCAC1C,YAAY,QAAQ,QAAQ,IAAI,OAAO,QAAQ;;;;;;;;;;;8CAInD,8OAAC,iMAAA,CAAA,SAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,SAAS;oCACT,MAAK;oCACL,UAAU;oCACV,SAAS,CAAC;wCACR,QAAQ,GAAG,CAAC,wBAAwB;wCACpC,QAAQ,GAAG,CAAC,uBAAuB;wCACnC,QAAQ,GAAG,CAAC,mBAAmB,EAAE,aAAa,CAAC,IAAI;wCACnD,kBAAkB;oCACpB;8CAEC,eAAe,kBAAkB;;;;;;;;;;;;oBAIxC;;;;;;;;;;;;;;;;;AAKV","debugId":null}}]
}