{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rexliu/staff-mgmt-tool/frontend/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { \n  Container, \n  Typography, \n  Grid, \n  Card, \n  CardContent,\n  Button,\n  Box\n} from '@mui/material';\nimport { \n  People, \n  Assignment, \n  Assessment, \n  Schedule \n} from '@mui/icons-material';\nimport { useAppSelector, useAppDispatch } from '../../lib/hooks';\nimport { logout } from '../../lib/features/auth/authSlice';\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const dispatch = useAppDispatch();\n  const { user, isAuthenticated, token, loading } = useAppSelector((state) => state.auth);\n  const [mounted, setMounted] = useState(false);\n\n  // Debug dashboard state\n  console.log('🏢 Dashboard: Component rendered');\n  console.log('🏢 Dashboard: Auth state:', { \n    isAuthenticated, \n    user: user?.email, \n    token: token ? 'YES' : 'NO', \n    mounted,\n    loading \n  });\n\n  useEffect(() => {\n    console.log('🏢 Dashboard: Mounting...');\n    setMounted(true);\n  }, []);\n\n  useEffect(() => {\n    console.log('🏢 Dashboard: Auth check - mounted:', mounted, 'isAuthenticated:', isAuthenticated, 'loading:', loading);\n    \n    // Simplified auth check - only redirect if clearly not authenticated\n    if (mounted && !isAuthenticated && !loading) {\n      console.log('❌ Dashboard: Not authenticated, redirecting to login');\n      router.push('/login');\n    } else if (mounted && isAuthenticated) {\n      console.log('✅ Dashboard: User is authenticated, staying on dashboard');\n    }\n  }, [isAuthenticated, router, mounted, loading]);\n\n  const handleLogout = () => {\n    dispatch(logout());\n    router.push('/');\n  };\n\n  // Show loading while waiting for auth state\n  if (!mounted || loading) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Typography>Loading...</Typography>\n      </Container>\n    );\n  }\n\n  // If not authenticated, the useEffect will handle redirect\n  if (!isAuthenticated) {\n    return (\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n        <Typography>Redirecting to login...</Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={4}>\n        <Typography variant=\"h4\" component=\"h1\">\n          Dashboard\n        </Typography>\n        <Button variant=\"outlined\" onClick={handleLogout}>\n          Logout\n        </Button>\n      </Box>\n\n      <Typography variant=\"h6\" gutterBottom>\n        Welcome back, {user?.firstName} {user?.lastName}\n      </Typography>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box display=\"flex\" alignItems=\"center\">\n                <People color=\"primary\" sx={{ mr: 2 }} />\n                <Box>\n                  <Typography variant=\"h6\">Team</Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Manage team members\n                  </Typography>\n                </Box>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box display=\"flex\" alignItems=\"center\">\n                <Assignment color=\"primary\" sx={{ mr: 2 }} />\n                <Box>\n                  <Typography variant=\"h6\">Projects</Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Track project progress\n                  </Typography>\n                </Box>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box display=\"flex\" alignItems=\"center\">\n                <Assessment color=\"primary\" sx={{ mr: 2 }} />\n                <Box>\n                  <Typography variant=\"h6\">Reports</Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    View analytics\n                  </Typography>\n                </Box>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n\n        <Grid item xs={12} sm={6} md={3}>\n          <Card>\n            <CardContent>\n              <Box display=\"flex\" alignItems=\"center\">\n                <Schedule color=\"primary\" sx={{ mr: 2 }} />\n                <Box>\n                  <Typography variant=\"h6\">Schedule</Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\">\n                    Manage schedules\n                  </Typography>\n                </Box>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}